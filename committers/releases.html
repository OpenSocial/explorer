<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Apr 16, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130416" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OpenSocial Explorer Site - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
    
    <a href="http://github.com/OpenSocial/explorer">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://opensocial.org/wp-content/themes/Lucid/images/logo.png" id="bannerLeft">
                                                                                        <img src="http://opensocial.org/wp-content/themes/Lucid/images/logo.png"  alt="OpenSocial" width="250" height="180"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-04-16</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Get The OSE</li>
                                
      <li>
    
                          <a href="../download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                              <li class="nav-header">Developer Resources</li>
                                
      <li>
    
                          <a href="../developer/getting-started.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                  
      <li>
    
                          <a href="../developer/unit-tests.html" title="Writing Unit Tests">
          <i class="none"></i>
        Writing Unit Tests</a>
            </li>
                  
      <li>
    
                          <a href="../developer/adding-gadget-specs.html" title="Adding Gadget Specs">
          <i class="none"></i>
        Adding Gadget Specs</a>
            </li>
                              <li class="nav-header">Committer Resources</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>Performing Releases</a>
          </li>
                  
      <li>
    
                          <a href="../committers/site.html" title="Publishing The Site">
          <i class="none"></i>
        Publishing The Site</a>
            </li>
                                        <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="../java/opensocial-explorer-server/index.html" title="OpenSocial Explorer Server">
          <i class="none"></i>
        OpenSocial Explorer Server</a>
            </li>
                  
      <li>
    
                          <a href="../java/opensocial-explorer-gadget-spec-server/index.html" title="OpenSocial Gadget Spec Server">
          <i class="none"></i>
        OpenSocial Gadget Spec Server</a>
            </li>
                  
      <li>
    
                          <a href="../opensocial-explorer-gadget-specs/index.html" title="OpenSocial Explorer Gadget Specs">
          <i class="none"></i>
        OpenSocial Explorer Gadget Specs</a>
            </li>
                  
      <li>
    
                          <a href="../opensocial-explorer-webcontent/index.html" title="OpenSocial Explorer Web Content">
          <i class="none"></i>
        OpenSocial Explorer Web Content</a>
            </li>
                  
      <li>
    
                          <a href="../opensocial-explorer-server-war/index.html" title="OpenSocial Explorer WAR Packaging">
          <i class="none"></i>
        OpenSocial Explorer WAR Packaging</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                    
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License. --><h1>Performing A Release</h1><p>We roughly follow the <a class="externalLink" href="http://www.apache.org/dev/release-publishing.html">Apache release process</a> when performing a release for the OpenSocial Explorer. There are a few prerequisites before being able to perform a release:</p>
<ol style="list-style-type: decimal">
  <li>You need to be a committer. Creating a release will involve pushing files to the GitHub repo so you need to have permissions to do so.</li>
  <li>You need to generate a public and private key in order to sign releases and add your public key to the <a class="externalLink" href="https://github.com/OpenSocial/explorer/blob/master/KEYS">KEYS</a> file in the project.</li>
  <li>You need to have an account for the Sonatype OSS Repository. Follow the steps in the <a class="externalLink" href="https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide">user guide</a> to create an account. Then leave a comment on this <a class="externalLink" href="https://issues.sonatype.org/browse/OSSRH-5824">JIRA ticket</a> saying you want publishing rights to the repository.</li>
</ol><p>Requirement number one is obvious however requirement number two may seem a bit odd if your are not experiences with open source projects. At a very high level we want to sign all release artifacts so that consumers can be somewhat confident that the artifacts are coming from a reliable source. Apache has a very good <a class="externalLink" href="http://www.apache.org/dev/release-signing.html">overview</a> of the how and why of doing this. If you want to perform releases please read and follow their document first.</p><p>The OpenSocial Explorer should be consumable by other applications so we also publish our artifacts to the Central Maven Repository for other Maven projects to easily consume. Sonyatype has an open source Maven repository which syncs with the Central Maven Repository that we use for hosting the OpenSocial Explorers artifacts. The process for deploying artifacts to their repository is documented in their <a class="externalLink" href="https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide">user guide</a>.</p><p>The steps below specify how to perform a release.</p><div class="section"><h2>0. Modify Your Maven Settings<a name="a0._Modify_Your_Maven_Settings"></a></h2><p>The Sonatype OSS release process assumes you have some servers defined in your Maven settings in order to upload release artifacts. Open your Maven settings.xml file in ~/.m2 and add the following servers.</p>
<div class="source"><pre class="prettyprint linenums">&lt;settings&gt;
  ...
  &lt;servers&gt;
    &lt;server&gt;
      &lt;id&gt;sonatype-nexus-snapshots&lt;/id&gt;
      &lt;username&gt;your-jira-id&lt;/username&gt;
      &lt;password&gt;your-jira-pwd&lt;/password&gt;
    &lt;/server&gt;
    &lt;server&gt;
      &lt;id&gt;sonatype-nexus-staging&lt;/id&gt;
      &lt;username&gt;your-jira-id&lt;/username&gt;
      &lt;password&gt;your-jira-pwd&lt;/password&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
  ...
&lt;/settings&gt;
</pre></div><p>The jira-id and jira-pwd are your JIRA user name and password you signed up with in step 3 of the prequisites above.</p></div><div class="section"><h2>1. Open An Issue<a name="a1._Open_An_Issue"></a></h2><p>Open an <a class="externalLink" href="https://github.com/OpenSocial/explorer/issues">issue</a> used to track the release.</p></div><div class="section"><h2>2. Create A Clone Of The Repository<a name="a2._Create_A_Clone_Of_The_Repository"></a></h2><p>Create a clone of the repository to do your release work. You may also use an existing clone of the repo if you have one.</p>
<div class="source"><pre class="prettyprint linenums"> $ git clone git@github.com:OpenSocial/explorer.git     
 $ cd explorer
</pre></div></div><div class="section"><h2>3. Perform A Dry Run<a name="a3._Perform_A_Dry_Run"></a></h2><p>You want to do a dry run of the release first. This will perform a release without checking in any code or creating a tag.</p>
<div class="source"><pre class="prettyprint linenums">$ mvn release:prepare -DdryRun=true -Prelease
</pre></div><p>Running the release profile (-Prelease) is key in that it will also build the opensocial-explorer-assembly module and produce source and javadoc jar files. This is kept out of the normal build to reduce the overhead when doing development. The release:prepare goal will create modified POM files for all the modules. You will see multiple versions for each.</p>
<ul>
  <li><b>pom.xml.tag:</b> The POM that will be checked in and associated with the tagged release. This POM will have the current version specified in it with the SNAPSHOT tag removed.</li>
  <li><b>pom.xml.next:</b> The POM that will be checked in and will have the next version of the project.</li>
  <li><b>pom.xml.releaseBackup:</b> A backup unmodified version of the POM file.</li>
</ul><p>It is good practice to review the changes made to the different POM files to make sure everything apears correct. You can easily do this with any diff tool. The main things to look for is that the versions and SCM elements are modified correctly. If you find something that is wrong you can clean the release by running </p>
<div class="source"><pre class="prettyprint linenums">$ mvn release:clean
</pre></div><p>This will clean up all the POM files. You can then go ahead and fix whatever is wrong and rerun the dry run.</p></div><div class="section"><h2>4. Prepare The Release<a name="a4._Prepare_The_Release"></a></h2><p>Once you are satisfied with the dry run you can prepare the release.</p>
<div class="source"><pre class="prettyprint linenums">$ mvn release:clean
$ mvn release:prepare -Prelease
</pre></div><p><span class="label label-important">The release:prepare goal will actually check in the new POM files and tag the release in the GitHub repo.</span></p></div><div class="section"><h2>5. Stage The Release<a name="a5._Stage_The_Release"></a></h2><p>You should now deploy the releases to the staging repository.</p>
<div class="source"><pre class="prettyprint linenums">$ mvn release:perform -Prelease
</pre></div><p>You should now be able to log into <a class="externalLink" href="https://oss.sonatype.org">Sonatype Nexus App</a> and click Staging Repositories in the navigator on the left and find the release you just staged. The artifacts in this staging repository will be the ones you and the rest of the community test with before promoting the release. It is easier to download the artifacts <a class="externalLink" href="https://oss.sonatype.org/content/groups/staging/org/opensocial/explorer/">here</a> than from the Nexus app.</p></div><div class="section"><h2>6. Let The Community Know<a name="a6._Let_The_Community_Know"></a></h2><p>Modify the issue you created in step 1 with a link to the staging artifacts and let the community know that there is a new release candidate. As long as no one finds any issues within 72 hours of staging the release you may promote the release.</p></div><div class="section"><h2>7a. Promoting A Release<a name="a7a._Promoting_A_Release"></a></h2><p>Follow step 8a in the <a class="externalLink" href="https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide">Sonatype OSS User Guide</a> to release the staged artifacts. Once a staged release has been closed they will appear <a class="externalLink" href="https://oss.sonatype.org/content/groups/public/org/opensocial/explorer/">here</a>. Note that the Sonatype repository syncs with the Central Maven Repository every 2 hours so it may take up to 2 hours for the release to appear in the Central Maven Repository.</p></div><div class="section"><h2>7b. Dropping A Release<a name="a7b._Dropping_A_Release"></a></h2><p>It is not uncommon to find a problem with a staged release. When you do you will need to drop the release, fix the problem, and stage it again. In step 8a of the <a class="externalLink" href="https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide">Sonatype OSS User Guide</a> there is a description of how to drop a release as well. This will remove all the staged artifacts from the repository.</p><p>This is not the only thing you need to do though, remember Maven also created a tag for the release and checked in changes to the POM files, we also need to undo those as well. Luckily as long as you have not run a release clean operation since performing the release, Maven can take case of undoing some of this for you by using the <a class="externalLink" href="http://maven.apache.org/maven-release/maven-release-plugin/examples/rollback-release.html">release rollback goal</a>. You just have to run</p>
<div class="source"><pre class="prettyprint linenums">$ mvn release:rollback -Dtag=tag-name -Prelease
</pre></div><p><span class="label label-important">Currently this will not <a class="externalLink" href="http://jira.codehaus.org/browse/MRELEASE-229">undo</a> the tag Maven created in GitHub, that you will have to do yourself.</span></p></div><div class="section"><h2>8. Update The Project Site<a name="a8._Update_The_Project_Site"></a></h2><p>After a new release you need to update the <a href="../download.html">Downloads</a> page with a links to the latest release artifacts and source code. To publish the site see the <a href="../committers/site.html">site documentation</a>.</p></div><div class="section"><h2>9. Close The Issue And The Milestone<a name="a9._Close_The_Issue_And_The_Milestone"></a></h2><p>Close the issue you opened for the release and also close the milestone for the release. Make sure you create a milestone for the next release.</p></div><div class="section"><h2>10. Announce The Release<a name="a10._Announce_The_Release"></a></h2><p>We need to get the word out about the new release, here are some channels we can use to do that.</p>
<ol style="list-style-type: decimal">
  <li><a class="externalLink" href="http://blog.opensocial.org/">The OpenSocial Blog</a></li>
  <li>Twitter accounts, specifically the <a class="externalLink" href="https://twitter.com/opensocial">OpenSocial</a> one.</li>
  <li>The <a class="externalLink" href="https://groups.google.com/forum/?fromgroups#!forum/opensocial-and-gadgets-spec">OpenSocail Spec Google Group</a>.</li>
</ol></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="http://opensocial.org">OpenSocial Foundation</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>